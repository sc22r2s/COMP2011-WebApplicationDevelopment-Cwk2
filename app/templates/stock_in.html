    {% extends 'base.html' %} {% block content %}
<div class="forms">
  <form action="#" method="post" id="form">
    <div class="form-group">
      <label for="ProductCode">Product Code</label>
      <input
        type="text"
        class="form-control"
        id="ProductCodeInput"
        placeholder="Enter Product Code"
      />
    </div>

    <div class="form-group">
      <label for="ProductName">Product Name</label>
      <input
        type="text"
        readonly
        class="form-control"
        id="ProductNameDisplay"
        placeholder="Product Name"
      />
    </div>

    <div class="form-group">
      <label for="ProductDescription">Product Description</label>
      <input
        type="text"
        readonly
        class="form-control"
        id="ProductDescriptionDisplay"
        placeholder="Product Description"
      />
    </div>

    <div class="form-group">
      <label for="ProductRate">Product Rate</label>
      <input
        type="text"
        readonly
        class="form-control"
        id="ProductRateDisplay"
        placeholder="Product Rate"
      />
    </div>

    <div class="form-group">
      <label for="ProductQuantity">Product Quantity</label>
      <input
        type="text"
        class="form-control"
        id="ProductQuantityInput"
        placeholder="Enter Product Quantity"
      />
    </div>

    <button type="submit" class="btn btn-primary">Add</button>
  </form>
</div>

<br>

<table class="table table-striped table-bordered table-hover table-sm">
    <thead>
    <tr>
        <th scope="col">Product ID</th>
        <th scope="col">Product Code</th>
        <th scope="col">Product Name</th>
        <th scope="col">Quantity</th>
    </tr>
    </thead>

    <tbody id="product-row">

    </tbody>
</table>

<script>

  $("#ProductCodeInput").keydown(function (event) {

    if (event.keyCode === 13) {
        event.preventDefault();
        var code = $("#ProductCodeInput").val();

        $.ajax({
            type: 'GET',
            url: '/ajax/display-product-detail',
            data: { productCode: code },    
            success: function(data, status, xhr) {
                if (data.hasOwnProperty("error") ) {
                    alert("Invalid product code");
                } else {
                    $("#ProductNameDisplay").val(data.productName);
                }
            },
            error: function (jqXhr, textStatus, errorMessage) {
                // error callback
                alert(errorMessage);
            }
        });
    }

  });

  $("form").on("submit", function (event) {
    event.preventDefault();
    if ($("#ProductNameDisplay").val() === "") {
        alert("Can not add product to batch");
    } else {
        $('#product-row').append("<tr><td>"+$("#ProductNameDisplay").val()+"</><td>b</td><td>c</td><td>d</td></tr>");
        $("#ProductCodeInput").val("");
        $("#ProductNameDisplay").val("");
    }

  });
</script>
{% endblock %}
